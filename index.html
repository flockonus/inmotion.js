<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
    <head> 
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
				
        <title>JavaScript In Motion : Editor </title>
		
		<script charset="utf-8" type="text/javascript" src="lib/jquery/jquery-1.4.2.js">   </script>
		
		<script type="text/javascript" src="lib/misc/shortcut.js"> </script>  <!-- shall change to: http://www.openjs.com/scripts/events/keyboard_shortcuts/ -->
		
		<script type="text/javascript" src="lib/misc/flockonus_utils.js"        ></script>
		<script type="text/javascript" src="lib/inmotion/img_manager.js"        ></script>
		<script type="text/javascript" src="lib/inmotion/core.js"        ></script>
		<script type="text/javascript" src="lib/inmotion/tween.js"        ></script>
		
		<script type="text/javascript" src="lib/inmotion/editor.js"        ></script>
		<script type="text/javascript" src="lib/inmotion/drawing_table.js" ></script>
		<script type="text/javascript" src="lib/inmotion/key_frame.js"     ></script>
		<script type="text/javascript" src="lib/inmotion/super_bone.js"    ></script>
		
		<link type="text/css" rel="stylesheet" href="style/editor.css" />
		<link type="text/css" rel="stylesheet" href="style/buttons.css" />
		<link type="text/css" rel="stylesheet" href="style/my_modal.css" />
		
		<script type="text/javascript">
			//jQuery.noConflict();
			j = jQuery;
			f = FlockonUS;
		</script>
		
		
		<script type="text/javascript">
			// point-zero baby ;)
			
			var $console = j('#console')
			function log( info ){
			  j('#console').prepend( info+" " )
			  return(true)
			}
			
			$e = null;
			$im = null;
			j(document).ready( function(){
				$im = new InMotion('drawingtable')
				// TODO setar funcao de resize ao invez.
				$e = new Editor()
				setTimeout( '$e.resize()', 500 );

				$e.add_key_frame()
				
				j('#keyframes dd').live('click', function(e){
					$e.focus_key_frame( e.target )
				})
				
				$e.set_mode('draw0')
				
				
				
				
				
				
				// FUGLY test for Image rendering
				
				var exp_string = "({"+
   "'img_test_sb' : ["+
     "{ visible: true, p1x:-85, p1y:68, p2x:158, p2y:50, shape:'linear', animation: 'default', duration:0.5, img_url: 'exp/marara.png'},"+
     "{ visible: true, p1x:-85, p1y:68, p2x:-87, p2y:-99, shape:'linear', animation: 'default', duration:0.5, img_url: 'exp/marara.png'},"+
     "{ visible: true, p1x:-85, p1y:68, p2x:-149, p2y:46, shape:'linear', animation: 'default', duration:0.5, img_url: 'exp/marara.png'}"+
    "]"+
"})"
				function preload_img_cb(){
					$im.create_animation('preview', 'base');
					$im.play('preview');
					clearInterval( $e.preview_routine );
					$e.preview_routine = setInterval('$e.loop_preview()', 30 );
				}
				//$im.register( 'base', exp_string, preload_img_cb );
			})
			
			
		</script>
    </head>
    <body>
    	
		<div id="left">
			
    		<div id="header">
        		<h3>JavaScript In Motion v0.2.2</h3>
							<em style="font-size: 70%, vertical-align: top;">
						 	by <a href="http://twitter.com/flockonus" target="_blank">@FlockonUS</a> 
							<a href="https://github.com/flockonus/javascriptinmotion" target="_blank" >GitHub</a>
							<a href="#mostrae" style="color: #FF5;" onclick=" j('.blackout:first').fadeIn() ;return false;"> HELP! </a>
							</em>
						   
						<span class="button blue bigrounded" title="Shortcut: P" onclick="$e.set_mode('preview0')" id="play_bt">  PLAY &gt; </span>
    		</div>
				
				
			<div id="bonepane">
				<h4>Bone Panel</h4>
				<div class="content">
					<i>new bone info will appear here</i>
					<form action="javascript: $e.apply_bonepane( this );" onsubmit="" > <!-- gotta apply some buble cancel here -->
						<input type="hidden" name="original_name" /> 
						Name:<input type="text" name="name" size="14" maxlength="14" /> <br/>
						Image Url:<input type="text" name="img_url" size="14" maxlength="255" /> <span class="button blue small" title="Shortcut: RETURN" onclick="j(this).parents('form').submit();">ok</span>
						<br> &nbsp;
						<!--button type="submit" onc > OK</button-->
					</form>
				</div>
			</div> 
			
			
			<div id="timeline">
				<h4>Timeline</h4>
				<span class="button blue bigrounded" title="Shortcut: A" onclick="$e.add_key_frame();" >  ADD+ FRAME </span>
				<!-- NOT USEFUL? =/
				span class="button blue bigrounded" title="Shortcut: PageUp" onclick="$e.focus_key_frame('prev');" > /\ </span>
				<span class="button blue bigrounded" title="Shortcut: PageDown" onclick="$e.focus_key_frame('next');" > \/ </span-->
				
				<dl id="keyframes"> <!-- reflects the state of the var $kfs[] -->
				</dl>
			</div>
		</div>
		
		
		<div id="right">
			<span id="mode"> STAGE </span><br/>
			
				<canvas id="drawingtable" width="400px" height="300px"> </canvas>
				<div id="buttonpane">
					<span class="button blue bigrounded" title="Shortcut: D" onclick="$e.set_mode('draw0')" id="draw_bt"> DRAW </span>
					<span class="button blue bigrounded" title="Shortcut: M" onclick="$e.set_mode('move0')"  id="move_bt"> MOVE </span>
				</div>
			
			<div id="console">
				CONSOLE
				
			</div>
		</div>
		
		
		
		
		
	<div class="blackout"> .
		<div class="modal" id="help1">
			<div class="header">
				InMotion: Quick Help <a onclick="j('.blackout:first').fadeOut()" class="close"> [X] </a>
			</div>
			<div class="body">
				<h2> What is this? </h2>
				<p>
					To know more about the idea of this project, please refer to the <a href="https://github.com/flockonus/javascriptinmotion" target="_blank" >GitHub</a> page
				</p>
				<br>
				<br>
				<!--h2> How to use </h2>
				<p> 
					The buttons are your friends! And they have shortcuts (just hover a button to see each) <br>
				</p-->
				<h2> Quick Start </h2>
				<div style="text-align: left;">
					This small tut, is assuming you just oppened the page, didn't touch any button (press <strong>F5</strong> to clear all)<br>
					<br>
					1. Click <strong>2 points</strong> at the white canvas<br>
					1.1 =&gt; You just made a <strong>BONE</strong><br>
					<br>
					2. Click the Button <strong>ADD+ FRAME</strong> (below Timeline)<br>
					2.1 =&gt; You just added one more <strong>KeyFrame</strong> to the composition<br>
					2.2 =&gt; On this new <strong>KeyFrame</strong> the bone you drawn can assume a new position<br>
					<br>
					3. Click any <strong>edge of the Bone</strong>, and <strong>click again</strong> anywhere on the Canvas<br>
					3.1 =&gt; You have just setted a animation for the bone, very well!<br>
					<br>
					4. Click <strong>PLAY &gt;</strong>, to animate what you just created!<br>
					4.1 =&gt; That is a small preview, the possibilities here are huge!<br>
					<br>
					5. To add a image as skin to the bone paste this: <strong>exp/marara.png</strong> at the field <strong>Image Url</strong> (under the Bone Panel) and click the <strong>ok</strong> button<br>
					5.1 =&gt; You applied a image to the bone, bounded by it's limits. You can add any valid Image Url there.<br>
					
				  
				</div>
			</div> 
		</div>
	</div>


		
		
		
		
		
		
    </body>
</html>
